<div class="bg-khaki bg-opacity-25 d-flex">
  <!-- search bar -->
  <div class="input-group m-5">
    <input
      type="search"
      class="form-control rounded-end rounded-pill"
      placeholder="Search for ... "
      [(ngModel)]="keyword"
      (search)="filterByKeyword()"
      aria-label="Search for ... "
      aria-describedby="button-addon2"
    />
    <button
      class="btn border border-start-0 bg-white rounded-start rounded-pill"
      type="button"
      (click)="searchResultClick()"
    >
      <img src="assets/global/search.svg" alt="" width="20" />
    </button>
  </div>
</div>

<!-- search result -->
<div class="container-fluid">
  <div class="my-4">
    <app-browse-search-filter
      [(filterValues)]="filterValues"
      (filterValuesChange)="filterByFilterValues()"
    ></app-browse-search-filter>
  </div>
  <div class="m-4">
    <div class="d-flex">
      <div class="col mt-3">Search Results {{ this.db_result.length }}</div>

      <div class="d-flex flex-row-reverse">
        <div class="m-3">| Order by: A-Z</div>
        <div class="p-2">
          <select
            class="form-select m-0"
            style="max-height: 40px"
            id="viewSelect"
            aria-label="View select"
            [(ngModel)]="curView"
          >
            <option value="List" selected>List</option>
            <option value="Grid">Grid</option>
          </select>
        </div>
        <div class="my-3 ps-3">View</div>

        <div class="p-2">
          <select
            class="form-select m-0"
            style="max-height: 40px"
            aria-label="Result per page select"
            [(ngModel)]="itemsPerPage"
            (change)="itemPerPageChanged()"
          >
            <option selected value="50">50</option>
            <option value="100">100</option>
            <option value="10">10</option>
          </select>
        </div>
        <div class="mt-3">Result per page</div>
      </div>
    </div>

    <div class="d-flex border-bottom border-danger">
      <div class="col text-primary">
        {{ this.currentLetter }}
      </div>

      <div class="btn-group">
        <button
          class="btn btn-link"
          *ngFor="let letter of letters"
          [ngClass]="currentLetter === letter ? 'btn-danger' : ''"
          (click)="lettersBtnClick(letter)"
        >
          {{ letter }}
        </button>
      </div>
    </div>

    <!-- display search results -->

    <div *ngIf="curView === 'List'; else elseBlock">
      <app-stip-spinner
        [isLoading]="isloading"
        ></app-stip-spinner>
      <div
        class="row p-4 my-1 bg-primary rounded-pill"
        name="searchLayout"
        *ngFor="let result of display"
      >
        <div class="pe-5">
          <img
            src="assets\browsepage\tempprofile.png"
            class="rounded-circle border"
            width="100vw"
            height="100vw"
          />
        </div>
        <div class="flex-grow-1">
          <div>{{ result.full_name }}</div>
          <div class="pb-3">{{ result.workplace }}</div>
          <div>{{ result.description }}</div>
        </div>
      </div>
    </div>
    <ng-template #elseBlock>
      <div
        class="row"
        name="searchLayout"
        *ngFor="let results of display | updateRows: 5"
      >
        <div
          class="p-4 my-1 bg-primary text-truncate"
          style="height: 20vw; width: 20%"
          *ngFor="let result of results"
        >
          <img
            src="assets\browsepage\tempprofile.png"
            class="rounded-circle border"
            width="50vw"
            height="50vw"
          />

          <div>
            <div>{{ result.full_name }}</div>
            <div class="pb-3">{{ result.workplace }}</div>
            <div class="text-wrap">{{ result.description }}</div>
          </div>
        </div>
      </div>
    </ng-template>

    <!-- search nav -->

    <div class="d-flex flex-row-reverse">
      <nav aria-label="Page navigation">
        <pagination
          [rotate]="true"
          [totalItems]="db_result.length"
          [boundaryLinks]="true"
          [itemsPerPage]="itemsPerPage"
          [(ngModel)]="currentPage"
          (pageChanged)="pageChanged($event)"
          previousText="&lsaquo;"
          nextText="&rsaquo;"
          firstText="&laquo;"
          lastText="&raquo;"
          [maxSize]="10"
        >
        </pagination>
      </nav>

      <div class="p-2 bd-highlight">
        page {{ this.currentPage }} of {{ this.maxPage }}
      </div>
    </div>
  </div>
</div>
